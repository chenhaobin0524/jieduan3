"use strict";var MongoClient=require("mongodb").MongoClient,url="mongodb://localhost:27017",dbName="chen",connect=function(){return new Promise(function(t,r){MongoClient.connect(url,{useUnifiedTopology:!0},function(e,n){e?r(e):t(n),console.log("连接成功")})})},find=function(c,s){return new Promise(function(t,r){var n,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(connect());case 2:n=e.sent,o=n.db(dbName),o.collection(c).find(s||{}).toArray(function(e,n){e?r(e):t(n),console.log("查找成功")}),n.close();case 7:case"end":return e.stop()}})})},insert=function(c,s){return new Promise(function(t,r){var n,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(connect());case 2:n=e.sent,o=n.db(dbName),o.collection(c).insertMany(s,function(e,n){e?r(e):t(n),console.log("插入成功")}),n.close();case 7:case"end":return e.stop()}})})},update=function(c,s,i){return new Promise(function(t,r){var n,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(connect());case 2:n=e.sent,o=n.db(dbName),o.collection(c).updateOne(s,{$set:i},function(e,n){e?r(e):t(n),console.log("更改成功")}),n.close();case 7:case"end":return e.stop()}})})},del=function(c,s){return new Promise(function(t,r){var n,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(connect());case 2:n=e.sent,o=n.db(dbName),o.collection(c).deleteMany(s||{},function(e,n){e?r(e):t(n),console.log("删除成功")}),n.close();case 7:case"end":return e.stop()}})})};module.exports={find:find,insert:insert,update:update,del:del};